@{
    ViewBag.Title = "Data Tier Control";
}
<div class="container">
    <div class="row">
        <div class="col-md-2">
            <button class="btn btn-default" id="backup" onclick="location.href='@Url.Action("DownloadVisitStadistics", "Admin")';return false;">
                <i class=" fa fa-users fa-5x"></i><br />
                Access Stadistics
            </button>
        </div>
        <div class="col-md-2">
            <button class="btn btn-default" id="backup" onclick="location.href='@Url.Action("Backup", "Admin", new { tableNames = "__MigrationHistory,UserProfile,webpages_Membership,webpages_Roles,webpages_UsersInRoles" , promptDownload = true})'">
                <i id="bulb" class=" fa fa-cloud-download fa-5x"></i><br />
                Generate Backup
            </button>
        </div>
        <div class="col-md-2">
            <button class="btn btn-default" id="clean">
                <i id="bulb" class=" fa fa-trash-o fa-5x"></i><br />
                Clean Database
            </button>
            <div style="display:none;margin-top:10px" id="eraseDB">
                <form>
                    <label class="text-danger">WARNING. Complete Database will be erased, all information will be lost without chance of recovery.</label>
                    <button id="erase" class="btn btn-danger" type="button">
                        <i class="fa fa-warning fa-2x"></i> Erase
                    </button>
                </form>
            </div>
        </div>
        <div class="col-md-2">
            <button id="restore" class="btn btn-default">
                <i class="fa fa-recycle fa-5x"></i><br />
                Restore Database
            </button>
            <div style="display:none;margin-top:10px" id="fileForm">
                @using (Html.BeginForm("UploadReport", "Report", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {@Html.ValidationSummary()
                    <form>
                        <label>
                            Select SQL Script to Load:
                        </label>
                        <input id="fileUpload" name="fileUpload" type="file" accept="text/x-sql" />
                        <label class="text-danger">WARNING. SQL Scripts could render Database useless, please make sure the script you are about to upload was generated by Bauhaus.</label>
                        <button class="btn btn-default" type="submit">
                            <i class="fa fa-upload"></i> Upload
                        </button>
                    </form>
                }
            </div>
        </div>
            <div class="col-md-2">
                <button class="btn btn-default" onclick="location.href='@Url.Action("backupContactsComments", "Admin")';return false;">
                    <i class=" fa fa-comments-o fa-5x"></i><br />
                    Contacts & Comments
                </button>
        </div>
    </div>
</div>

<script>
    $(function () {
        if ('@TempData["Message"]' != '')
            displayAlert('@TempData["Type"]', '@TempData["Message"]');
        $("#restore").click(function(){
            $("#fileForm").slideToggle()
        });
        $("#backup").click(function () {
            displayAlert("info", "Script is being generated, this could take a few seconds please wait.");
        });
        $("#clean").click(function () {
            $("#eraseDB").slideToggle()
        });
        $("#erase").click(function () {
            alert("hello");
            $.post("@Url.Action("Erase","Admin")", function (data) {
                displayAlert(data.Type, data.Message);
            });
        });

    });
</script>